<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAQ and Problem Solving &mdash; 3Di  (dev doc 2023-04-03) documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/matomo.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Servicedesk" href="f_servicedesk.html" />
    <link rel="prev" title="Authentication and User Management" href="f_authentication_user_management.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            3Di
          </a>
              <div class="version">
                 (dev doc 2023-04-03)
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="a_background.html">Background of 3Di</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_ecosystem.html">3Di Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_releasenotes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_contact.html">Contact</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modelling Guidelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="a_modelling_concepts.html">Basic Modelling Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="b_modeling_components.html">Modeling components</a></li>
<li class="toctree-l1"><a class="reference internal" href="b_modelling_workflow.html">Modelling Workflow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guide to the 3Di Modeller Interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="i_what_is_mi.html">What is the Modeller Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="i_overview_user_interface.html">Overview of the Modeller Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="i_modelling_with_mi.html">Modelling with the Modeller Interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guide to the 3Di Live Site</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="c_what_is_the_live_site.html">What is the Live Site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_livesite_overview.html">Overview of the Live Site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_modelling_with_live_site.html">Modelling with the Live Site</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guide to the 3Di Management Portal</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="d_management.html">What is the Management Portal</a></li>
<li class="toctree-l1"><a class="reference internal" href="d_management.html#overview-management-portal">Overview management portal</a></li>
<li class="toctree-l1"><a class="reference internal" href="d_overview_management_portal.html">How to use the Management Portal</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">3Di for developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="j_api.html">3Di API</a></li>
<li class="toctree-l1"><a class="reference internal" href="j_threedigrid.html">3Di Results API</a></li>
<li class="toctree-l1"><a class="reference internal" href="j_fews_3di_integrations.html">FEWS-3Di integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="j_lizard_api.html">Lizard API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="e_klondike_workflow.html">Tutorial 1: Workflow of creating a 3Di Schematisation and a 3Di Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_2d_tutorial.html">Tutorial 2: Building a Basic 2D Flow Schematisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_2d_slope_tutorial.html">Tutorial 3: 2D flow model over sloped terrain with multiple rasters</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_2d_levees_tutorial.html">Tutorial 4 Building a 2D flow model with levees, channels and breaches</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_1d_tutorial.html">Tutorial 5: Building a 1D model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Problem solving and support</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="f_3di_instruments_and_downloads.html">Installation manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="f_authentication_user_management.html">Authentication and User Management</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">FAQ and Problem Solving</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#frequently-asked-questions">Frequently Asked Questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#known-issues">Known Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modeller-interface">Modeller Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#live-site">Live site</a></li>
<li class="toctree-l3"><a class="reference internal" href="#management-pages">Management pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uploading-a-new-revision-migrating-a-model">Uploading a new revision/migrating a model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#error-400">Error: (400)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sqlite3-integrityerror-check-constraint-failed-alembic-tmp-v2-aggregation-settings">sqlite3.IntegrityError: CHECK constraint failed: _alembic_tmp_v2_aggregation_settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-simulation">Running a simulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exit-code-4161-health-check-premature-container-error">“exit_code”: “4161 [health_check_premature_container_error]”</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exit-code-4265-health-check-postprocessing-error">“exit_code”: “4265 [health_check_postprocessing_error]”</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-f-matrix-diagonal-element-near-zero">ERROR - F - Matrix diagonal element, near zero</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-the-combination-of-cross-section-types-is-invalid-for-input-channel-number">ERROR : The combination of cross-section types is invalid for input channel number:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-f-impossible-line-connection-at-calculation-node-729">ERROR - F - Impossible line connection at calculation node:            729</a></li>
<li class="toctree-l4"><a class="reference internal" href="#runtime-error-netcdf-string-match-to-name-in-use">Runtime Error: NetCDF: String match to name in use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#loading-results">Loading results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#runtime-error-attempt-to-write-a-readonly-database">Runtime Error: attempt to write a readonly database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#signing-in-and-sign-up">Signing in and sign up</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#you-do-not-have-a-3di-account-please-contact-your-manager-and-ask-for-an-invitation">403 - You do not have a 3Di account. Please contact your manager and ask for an invitation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#finding-a-model">Finding a model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connecting-to-the-3di-api">Connecting to the 3Di API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#solved-issues">Solved issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#threedigrid">ThreeDiGrid</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="f_servicedesk.html">Servicedesk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="g_massconservation.html">Conservation of mass</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_sources_sinks.html">Source and Sink terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_levees_obstacles_breaches.html">Obstacles, Levees and Breaches</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_wind.html">Wind effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_interception.html">Interception</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Model concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="h_basic_modelling_concepts_threedi.html">Basic Modelling Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_grid.html">The grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_numerics.html">Numerics</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_control.html">Control Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_calculation_grid_data.html">Tabulated data storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_results.html">Results 3Di</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_aggregate_results.html">Aggregated output</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_state_files.html">State files</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Overig</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="d_scenario_archive.html">Scenario Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="d_scenario_archive.html#view-stored-results">View stored results</a></li>
<li class="toctree-l1"><a class="reference internal" href="d_scenario_archive.html#damage-estimation">Damage Estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="d_scenario_archive.html#load-rasters-in-3di-modeller-interface-using-wms">Load rasters in 3Di Modeller Interface using WMS</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">3Di</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">FAQ and Problem Solving</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/f_problem_solving.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="faq-and-problem-solving">
<span id="f-problem-solving"></span><h1>FAQ and Problem Solving<a class="headerlink" href="#faq-and-problem-solving" title="Permalink to this heading"></a></h1>
<p>This section will help you solve some problems or errors that may occur when using 3Di.
Some issues are due to the software, these will be summarised in the section Known Issues, including a temporary solution.
Errors, due to input data or other user settings are usually covered by the schematisation and raster checker. In rare cases however they might not catch a potential issue. On this page we cover the FAQ &amp; Known Issues with 3Di.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#faq"><span class="std std-ref">Frequently Asked Questions</span></a></p></li>
<li><p><a class="reference internal" href="#known-issues"><span class="std std-ref">Known Issues</span></a></p></li>
</ul>
<section id="frequently-asked-questions">
<span id="faq"></span><h2>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>My script doesn’t work anymore, what do I need to do?</p></li>
</ul>
<p><em>In case this is an old script (&lt; 2022) please check the migration workflow available</em> <a class="reference external" href="https://api.3di.live/v3/docs/migrate_to_threediapi/">here</a>.</p>
<ul class="simple">
<li><p>I added extra tables in my SQLite, will they be deleted?</p></li>
</ul>
<p><em>No, those will be ignored.</em></p>
<ul class="simple">
<li><p>How do I edit a simulation template?</p></li>
</ul>
<p><em>You can’t. But you can clone it into a new simulation and edit that.</em></p>
<ul class="simple">
<li><p>Can I change infiltration in a simulation template?</p></li>
</ul>
<p><em>No, infiltration is part of the schematisation. You can copy a schematisation and change the infiltration file there.
An explainer on schematisations and simulation templates can be found here</em> <a class="reference internal" href="h_basic_modelling_concepts_threedi.html#basic-modelling-concepts"><span class="std std-ref">Basic Modelling Concepts</span></a></p>
<ul class="simple">
<li><p>Why is the name of my simulation template ‘default’?</p></li>
</ul>
<p><em>The name is being read from the v2_global_settings table in the ‘name’ column. If that happens to be ‘default’, then that is the name of your simulation template.</em></p>
<ul class="simple">
<li><p>What happens if I add an extra entry in the v2_global_settings table?</p></li>
</ul>
<p><em>Extra entries will be ignored.</em></p>
<ul class="simple">
<li><p>I have a variant on my schematisation that I like to test, what is the best way of doing so?</p></li>
</ul>
<p><em>Copy/clone the schematisation, make your changes and upload it as a new schematisation.</em></p>
<ul class="simple">
<li><p>How do I change my working directory in the Modeller Interface ‘3Di Models and Simulations’ plugin?</p></li>
</ul>
<ul class="simple">
<li><p>Via the settings of the plugin (see below).</p></li>
</ul>
<figure class="align-default">
<img alt="Open the settings of 3Di Models and Simulations" src="_images/f_changepluginsettings1.png" />
</figure>
<figure class="align-default">
<img alt="Change the working directory of 3Di Models and Simulations" src="_images/f_changepluginsettings2.png" />
</figure>
<ul class="simple">
<li><p>Is all information from my spatialite being read ?</p></li>
</ul>
<p><em>Yes, either it is being used as part of the schematisation and converted to a 3Di Model, or it is part of the simulation template.</em></p>
<ul class="simple">
<li><p>My QGIS defaults to the Dutch language, does that matter?</p></li>
</ul>
<p><em>What matters is that the numbers notation is set to English. There is a bug in QGIS with scientific notations and Dutch number notations which can cause weird behaviour of the plugin.
Please set your QGIS or Modeller Interface to English (settings –&gt; options –&gt; locale –&gt; en_GB).</em></p>
<p><strong>General</strong></p>
<ul class="simple">
<li><p>My model shows unstable behaviour, what can I do to avoid this?</p></li>
</ul>
<p>First of all, instability is not common within 3Di, but certain settings or modelling choices can cause problems for the solver.</p>
<p><em>We have these tips:</em></p>
<ol class="arabic simple">
<li><p>Decrease your calculation time step (background information: courant number)</p></li>
<li><p>Decrease your output time step temporarily. This makes it easier to analyse what goes wrong</p></li>
<li><p>Check combinations of nodes with a small storage area and pump stations with a large capacity. Make sure the ‘gemaalkelder/pump basement’ is large enough</p></li>
<li><p>Check if there are pump stations that are pumping to another 1D-node within the same 2D-computational cell</p></li>
<li><p>Check whether there are sewerage pipes shorter than 1 meter. If so, see if you can make them longer or add storage on the nodes that the pipes are connected to.</p></li>
<li><p>Put the ‘pump_implicit_ratio’ in the numerical settings to 1. This makes sure that the model calculates smoothly for pump stations (see  <a class="reference internal" href="h_numerics.html#matrixsolvers"><span class="std std-ref">Settings for Matrix solvers</span></a> –&gt; pump_implicit_ratio)</p></li>
</ol>
</section>
<section id="known-issues">
<span id="id1"></span><h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this heading"></a></h2>
<section id="general">
<h3>General<a class="headerlink" href="#general" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>When applying 2D boundary conditions, it is not allowed to have more than one grid resolution on the edge. However, there is no clear error message for this. To solve this, add a grid refinement line on the boundary. This will force a uniform grid on the 2D boundary line.</p></li>
<li><p>Note, that in v2_control tables (v2_control_table, v2_control_memory, v2_control_pid, v2_control_timed) the unit for adjusting the pump discharge capacity via the API is actually <em>m3/s</em>, even though the unit used normally is <em>l/s</em>. NB: This is only the case via the API. In the Modeller Interface (sqlite) the unit is in l/s.</p></li>
<li><p>For simulations including interflow or embedded elements, not all results can be viewed. Moreover, the water balance ignores part of the flow, therefore it will seem to be inconsistent.</p></li>
<li><p>There are some issues related to projections. We are encountered this for our UK-based models (.sqlite). These models will show a shift in the  geometries in QGIS. The reprojection from EPGS:27700 (British National Grid) to WGS84 is based on an outdated reprojection in the spatialite. There is a solution for this:</p></li>
</ul>
<ol class="arabic simple">
<li><p>In QGIS open the (table without geometry) table “spatial_ref_sys”</p></li>
<li><p>go to row srid 27700</p></li>
<li><p>update column proj4text (overwrite existing value) with +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +datum=OSGB36 +units=m +no_defs</p></li>
</ol>
<p>This might also be the case for other projections.</p>
<ul>
<li><p>The <em>manhole_storage_area</em> in the v2_global_settings table of the data base must be set as an INTEGER.</p></li>
<li><p>Boundary conditions can only be applied via the model sqlite. Uploading a boundary condition as a json file using the API will result in a failure of the simulation.</p></li>
<li><p>In rare cases the waterdepth interpolation in the livesite may show unexpected behaviour; it shows triangular patterns. These deviations are only visual, so the results are still correctly.</p></li>
<li><p>The following checks don’t work in case there is no index in the spatialite:</p>
<blockquote>
<div><ul class="simple">
<li><p>It doesn’t check for stand alone connection nodes</p></li>
<li><p>It doesn’t check for connection nodes that are too close or on top of each other</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="modeller-interface">
<h3>Modeller Interface<a class="headerlink" href="#modeller-interface" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>“TypeError: setValue(self, float): argument 1 has unexpected type ‘NoneType’ “. Maximum time step requires a value and cannot be NULL</p></li>
<li><p>The Modeller Interface and the plugins have trouble installing if there is already a previous version installed because of old dependencies. Please remove (before installing a new version) the folder ‘{user profile} python’ alle folders instead of ‘expressions’, ‘plugins’ and ‘share’.  (e.g. the error ‘sqlalchemy’ might indicate this is the case)</p></li>
<li><p>If you have an older version of the MI (e.g. based on QGIS 3.10), you should remove it via <em>Windows Apps &amp; Features</em>, to avoid any conflicts.</p></li>
<li><p>When using the sideview-tool in the QGIS-plugin, the length of the side view profile of pipes in the graph can be different than the actual length of the pipe. This is due to a projection conversion error in QGIS and does not affect 3Di calculations.</p></li>
<li><p>A schematisation that is uploaded via the MI without processing will appear falsely in the management pages as ‘not valid’. If you upload the schematisation again with processing, the model will be generated.</p></li>
<li><p>The Sideview is not supported for channels.</p></li>
<li><p>Embedded and interflow can not be analysed with the standard tooling.</p></li>
<li><p>When using an infiltration rate file in v2_simple_infiltration, an infiltration value of ‘NULL’ is not valid and will cause an error. Please use an infiltration rate value of 0 instead.</p></li>
<li><p>Leakage does not work in the Modeller Interface. Please use the API for now if you want to use leakage.</p></li>
</ul>
</section>
<section id="live-site">
<h3>Live site<a class="headerlink" href="#live-site" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>If a raster has both NaN and Nodata values the live site DEM will color yellow (showing color scale for -9999)</p></li>
<li><p>If a raster has a nodatavalue of 3.4028234663852886e+38 will not be visible in the live site. Setting it to -9999 will solve the issue. This can be done using QGIS tooling or the following GDAL command: gdalwarp -of GTiff -srcnodata 3.4028234663852886e+38 -dstnodata -9999 -co “COMPRESS=DEFLATE” dem1.tif dem2.tif</p></li>
</ul>
</section>
<section id="management-pages">
<h3>Management pages<a class="headerlink" href="#management-pages" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>A schematisation that is uploaded via the MI without processing will appear falsely in the management pages as ‘not valid’. If you upload the schematisation again with processing, the model will be generated.</p></li>
</ul>
</section>
<section id="uploading-a-new-revision-migrating-a-model">
<h3>Uploading a new revision/migrating a model<a class="headerlink" href="#uploading-a-new-revision-migrating-a-model" title="Permalink to this heading"></a></h3>
<section id="error-400">
<h4>Error: (400)<a class="headerlink" href="#error-400" title="Permalink to this heading"></a></h4>
<p><em>Error: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({‘server’: ‘openresty/1.15.8.3’, ‘date’: ‘Fri, 11 Feb 2022 07:44:04 GMT’, ‘content-type’: ‘application/json’, ‘content-length’: ‘68’, ‘vary’: ‘Accept, Origin, Cookie’, ‘allow’: ‘POST, OPTIONS’, ‘x-frame-options’: ‘DENY’, ‘x-content-type-options’: ‘nosniff’, ‘strict-transport-security’: ‘max-age=63072000’, ‘referrer-policy’: ‘strict-origin-when-cross-origin’, ‘x-xss-protection’: ‘1’})
HTTP response body: [“Maximum number of active threedimodels for a schematisation is 3”]</em></p>
<p>You have reached the max number of active 3Di models for this schematisation. Please go the management.3di.live and remove one or more 3Di models that are attached to this schematisation</p>
</section>
<section id="sqlite3-integrityerror-check-constraint-failed-alembic-tmp-v2-aggregation-settings">
<h4>sqlite3.IntegrityError: CHECK constraint failed: _alembic_tmp_v2_aggregation_settings<a class="headerlink" href="#sqlite3-integrityerror-check-constraint-failed-alembic-tmp-v2-aggregation-settings" title="Permalink to this heading"></a></h4>
<p>This can be fixed by the following 2 adjustments.</p>
<ol class="arabic simple">
<li><p>Set aggregation = 0  instead of aggregation = FALSE</p></li>
<li><p>remove table _alembic_tmp_v2_aggregation_settings</p></li>
</ol>
</section>
</section>
<section id="running-a-simulation">
<h3>Running a simulation<a class="headerlink" href="#running-a-simulation" title="Permalink to this heading"></a></h3>
<section id="exit-code-4161-health-check-premature-container-error">
<h4>“exit_code”: “4161 [health_check_premature_container_error]”<a class="headerlink" href="#exit-code-4161-health-check-premature-container-error" title="Permalink to this heading"></a></h4>
<p>Please run the simulation again. There was a temporary disruption.</p>
</section>
<section id="exit-code-4265-health-check-postprocessing-error">
<h4>“exit_code”: “4265 [health_check_postprocessing_error]”<a class="headerlink" href="#exit-code-4265-health-check-postprocessing-error" title="Permalink to this heading"></a></h4>
<p>Please run the simulation again. There was a temporary disruption.</p>
</section>
<section id="error-f-matrix-diagonal-element-near-zero">
<h4>ERROR - F - Matrix diagonal element, near zero<a class="headerlink" href="#error-f-matrix-diagonal-element-near-zero" title="Permalink to this heading"></a></h4>
<p>At one calculation point there is no storage area or the wet cross section area is near zero or even negative. This may be caused by various reasons listed below:</p>
<ul class="simple">
<li><p>Structure levels are below cross section reference levels, f.i. a culvert below the bed level. This is not possible as when water level drops below the bed level, flow through the culvert has no area to flow to. Update reference or structure levels so that they match. Reference levels can be below structure levels.</p></li>
<li><p>A lateral inflow from laterals or an inflow surface is connected to a node without storage area, f.i. an pump end node or boundary node. Removes laterals or inflow from these nodes.</p></li>
<li><p>Water level boundary is below structure level.</p></li>
<li><p>All definition values for width and height must be positive.</p></li>
<li><p>Pump start level is below pump stop level.</p></li>
</ul>
<p>The error is followed by a reference to the node without any storage or link without wet cross section area. This will look something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">near</span> <span class="n">zero</span><span class="p">,</span> <span class="n">aii</span><span class="p">(</span><span class="n">nod</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">1.0</span><span class="n">d</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">nod</span><span class="p">,</span><span class="n">aii</span><span class="p">(</span><span class="n">nod</span><span class="p">),</span><span class="n">su</span><span class="p">(</span><span class="n">nod</span><span class="p">)</span>  <span class="mi">14614</span>   <span class="mi">14439</span>  <span class="mf">0.0000E+00</span>  <span class="mf">0.0000E+00</span>
</pre></div>
</div>
<p>The first number (14614 in this example) refers to the calculation node on which the error occurs. This number can be found using the QGIS plugin when a result of this model is available. The number can be located using the <em>node_results</em>. The id’s in this table match the one given here. The second number is a link id and can be found using the <em>line_result</em> layer.</p>
</section>
<section id="error-the-combination-of-cross-section-types-is-invalid-for-input-channel-number">
<h4>ERROR : The combination of cross-section types is invalid for input channel number:<a class="headerlink" href="#error-the-combination-of-cross-section-types-is-invalid-for-input-channel-number" title="Permalink to this heading"></a></h4>
<p>Not all cross-section definition types can be combined for a single channel. Only type 1 (rectangle) and type 2 (circle) or type 5 and 6 (both tabulated) can be combined. If you have multiple cross-section types on one channel change these or split the channel.</p>
</section>
<section id="error-f-impossible-line-connection-at-calculation-node-729">
<h4>ERROR - F - Impossible line connection at calculation node:            729<a class="headerlink" href="#error-f-impossible-line-connection-at-calculation-node-729" title="Permalink to this heading"></a></h4>
<p>This error may occur when using embedded in combination with structures. Make sure no structure is placed entirely inside a 2D computational cell. You can only check this when you have a copy of the 2D computational grid. You can obtain this by making a purely 2D model of your DEM and grid refinement of try making one using the ‘create grid’ function in the QGIS processing toolbox.</p>
</section>
<section id="runtime-error-netcdf-string-match-to-name-in-use">
<h4>Runtime Error: NetCDF: String match to name in use<a class="headerlink" href="#runtime-error-netcdf-string-match-to-name-in-use" title="Permalink to this heading"></a></h4>
<p>Check the aggregation NetCDF name settings, names must be unique.</p>
</section>
</section>
<section id="loading-results">
<h3>Loading results<a class="headerlink" href="#loading-results" title="Permalink to this heading"></a></h3>
<section id="runtime-error-attempt-to-write-a-readonly-database">
<h4>Runtime Error: attempt to write a readonly database<a class="headerlink" href="#runtime-error-attempt-to-write-a-readonly-database" title="Permalink to this heading"></a></h4>
<p>This means that the gridadmin.sqlite is still in use by you or another user or is not closed correctly.
You can fix this by removing the file ‘gridadmin.sqlite-journal’ (not gridadmin.sqlite!).</p>
</section>
</section>
<section id="signing-in-and-sign-up">
<h3>Signing in and sign up<a class="headerlink" href="#signing-in-and-sign-up" title="Permalink to this heading"></a></h3>
<section id="you-do-not-have-a-3di-account-please-contact-your-manager-and-ask-for-an-invitation">
<h4>403 - You do not have a 3Di account. Please contact your manager and ask for an invitation<a class="headerlink" href="#you-do-not-have-a-3di-account-please-contact-your-manager-and-ask-for-an-invitation" title="Permalink to this heading"></a></h4>
<p>Please contact our <a class="reference internal" href="f_servicedesk.html#servicedesk"><span class="std std-ref">Servicedesk</span></a> and let us know your login name or mail address and the error code if you received any.</p>
</section>
</section>
<section id="finding-a-model">
<h3>Finding a model<a class="headerlink" href="#finding-a-model" title="Permalink to this heading"></a></h3>
<p>Can’t find the model you are looking for?
Please check the following:</p>
<ul class="simple">
<li><p>If you have access to the organization to which the model belongs</p></li>
<li><p>If the model is available on API v3. Please contact the <a class="reference internal" href="f_servicedesk.html#servicedesk"><span class="std std-ref">Servicedesk</span></a> if you need assistance.</p></li>
<li><p>If the schematisation has a 3Di model. Go to <a class="reference external" href="https://management.3di.live">management.3di.live</a>, search for your schematisation and check out the details page.</p></li>
</ul>
</section>
<section id="connecting-to-the-3di-api">
<h3>Connecting to the 3Di API<a class="headerlink" href="#connecting-to-the-3di-api" title="Permalink to this heading"></a></h3>
<p>In some cases the 3Di Models and Simulations plugin (part of the 3Di Modeller Interface) can give a generic SSLError on a Windows system (see figure below).
To solve this issue, please contact your organisation’s system administrator.
Instructions for your system administrator on how to solve this problem are given below the figure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Error</span><span class="p">:</span> <span class="n">HTTPSConnectionPool</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;api.3di.live&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">443</span><span class="p">):</span> <span class="n">Max</span> <span class="n">retries</span> <span class="n">exceeded</span> <span class="k">with</span> <span class="n">url</span><span class="p">:</span> <span class="o">/</span><span class="n">v3</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">token</span><span class="o">/</span> <span class="p">(</span><span class="n">Caused</span> <span class="n">by</span> <span class="n">SSLError</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;A failure in the SSL Library occurred (_ssl.c:1129)&#39;</span><span class="p">)))</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="Screenshot of the error" src="_images/f_ssl_error_qgis.png" />
</figure>
<p>This error is resulting from a combination of how the plugin validates SSL/TLS certificates and how Windows expects that to happen.
We are using Let’s Encrypt as our certificate supplier for most of our 3Di webservices.
In September 2021 their root certificate ‘DST Root CA X3’ expired and was replaced by the ‘ISRG Root X1’ certificate.
All of the Let’s Encrypt domain name certificates are issued by Intermediate Certificate ‘R3’.
There are some cases where this Intermediate Certificate is still issued by ‘DST Root CA X3’, and this can create issues.</p>
<p>To solve this, please open a Microsoft Management Console (mmc.exe) and add the Certificates Snap-In for the user.</p>
<figure class="align-default">
<img alt="MMC Certificates Snap-In" src="_images/f_mmc_certificates_snapin.png" />
</figure>
<p>Open the “Intermediate Certification Authorities” and then the “Certificates” folder.
Find the ‘R3’ Intermdiate Certificate, and check who the issuer is.
If this is only ‘DST Root CA X3’, please remove it and visit <a class="reference external" href="https://api.3di.live/v3">https://api.3di.live/v3</a> with a browser.</p>
<p>Please contact our <a class="reference internal" href="f_servicedesk.html#servicedesk"><span class="std std-ref">Servicedesk</span></a> after this fix is applied and are still receiving the error message.</p>
</section>
</section>
<section id="solved-issues">
<h2>Solved issues<a class="headerlink" href="#solved-issues" title="Permalink to this heading"></a></h2>
<p>The below errors and bugs should not be experienced anymore. Please let us know if you do still encounter them.</p>
<ul class="simple">
<li><p>The toolbox does currently not work properly for QGIS 3.22. You cannot edit your schematisations. Please use QGIS 3.16 for now if you have this issue or use the Modeller Interface.</p></li>
<li><p>Calculations that had both rain radar and laterals crashed somewhere during the simulation.</p></li>
</ul>
<section id="threedigrid">
<h3>ThreeDiGrid<a class="headerlink" href="#threedigrid" title="Permalink to this heading"></a></h3>
<p>The python package that can assist in analysing and making your own tools based on the 3Di results can be found at this <a class="reference external" href="https://github.com/nens/threedigrid">location</a>. The full threedigrid documentation can be found via the following link: <a class="reference external" href="https://threedigrid.readthedocs.io/en/latest/readme.html">Threedigrid documentation</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="f_authentication_user_management.html" class="btn btn-neutral float-left" title="Authentication and User Management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="f_servicedesk.html" class="btn btn-neutral float-right" title="Servicedesk" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Nelen &amp; Schuurmans.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>