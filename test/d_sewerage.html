<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sewerage &mdash; 3Di  (dev doc 2023-02-13) documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/matomo.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Hybrid Models" href="d_urban_areas.html" />
    <link rel="prev" title="Water system" href="d_water_system.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            3Di
          </a>
              <div class="version">
                 (dev doc 2023-02-13)
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="a_background.html">Background of 3Di</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_ecosystem.html">3Di Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_modelling_concepts.html">Basic Modelling Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_releasenotes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_contact.html">Contact</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">3Di Connectors</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="b_fews_3di_integrations.html">FEWS-3Di integration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guide to the 3Di Live Site</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="c_threedi_portal.html">Login to the Live Site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_threedi_portal.html#start-or-follow-a-session">Start or follow a session</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_threedi_portal.html#overview-session-screen-and-tooling">Overview session screen and tooling</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_threedi_portal.html#quitting-the-simulation">Quitting the simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_threedi_portal.html#store-results">Store results</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_threedi_portal.html#notables">Notables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How to work with 3Di</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="d_building_a_model.html">Building and editing a model schematisation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="d_building_w_modeller_interface.html">Building and editing a model with the Modeller Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="d_schematisation_editor.html">Using the Schematisation Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="d_visualising_computational_grids.html">Visualising computational grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="d_building_w_live_site.html">Editing a model schematisation with the live site</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="d_modeling_guidelines.html">Modeling guidelines</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="d_rasters.html">Rasters</a></li>
<li class="toctree-l3"><a class="reference internal" href="d_flood_model.html">Flood model</a></li>
<li class="toctree-l3"><a class="reference internal" href="d_water_system.html">Water system</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Sewerage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#manholes">Manholes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#structures-sewerage">Structures (sewerage)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#impervious-surfaces">Impervious surfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-boundary-conditions">1D boundary conditions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="d_urban_areas.html">Hybrid Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="d_control_structures.html">Control Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="d_boundary_conditions.html">Boundary Conditions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="d_checking_model_schematisation.html">Checking the model schematisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="d_adding_running_scenario.html">Adding scenario information and running a simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="d_viewing_analysing_results.html">Storing, viewing and analysing results</a></li>
<li class="toctree-l1"><a class="reference internal" href="d_management.html">Manage your schematisations and models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="e_klondike_workflow.html">Tutorial 1: Workflow of creating a 3Di Schematisation and a 3Di Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_2d_tutorial.html">Tutorial 2: Building a Basic 2D Flow Schematisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_2d_slope_tutorial.html">Tutorial 3: 2D flow model over sloped terrain with multiple rasters</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_2d_levees_tutorial.html">Tutorial 4 Building a 2D flow model with levees, channels and breaches</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_1d_tutorial.html">Tutorial 5: Building a 1D model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Problem solving and support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="f_3di_instruments_and_downloads.html">Installation manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="f_problem_solving.html">FAQ and Problem Solving</a></li>
<li class="toctree-l1"><a class="reference internal" href="f_servicedesk.html">Servicedesk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="g_massconservation.html">Conservation of mass</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_sources_sinks.html">Source and Sink terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_levees_obstacles_breaches.html">Obstacles, Levees and Breaches</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_wind.html">Wind effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_interception.html">Interception</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Model concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="h_basic_modelling_concepts_threedi.html">Basic Modelling Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_grid.html">The grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_numerics.html">Numerics</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_control.html">Control Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_calculation_grid_data.html">Tabulated data storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_results.html">Results 3Di</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_aggregate_results.html">Aggregated output</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_state_files.html">State files</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">3Di</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="d_building_a_model.html">Building and editing a model schematisation</a></li>
          <li class="breadcrumb-item"><a href="d_modeling_guidelines.html">Modeling guidelines</a></li>
      <li class="breadcrumb-item active">Sewerage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/d_sewerage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sewerage">
<h1>Sewerage<a class="headerlink" href="#sewerage" title="Permalink to this heading"></a></h1>
<p>To model the sewerage system you will need different types of structures. A sewerage model can be solely the sewerage system itself (1D), or it can interact with the surface using 2D raster-files (1D/2D). This tutorial shows you what steps you need to take to add these elements to an existing model. The first thing you must do is activate 1D flow in the global settings. Also consider the following parameters in the global or numerical settings:</p>
<ul class="simple">
<li><p>manhole_storage_area</p></li>
<li><p>advection_1d</p></li>
<li><p>max_angle_1d_advection</p></li>
<li><p>max_degree</p></li>
<li><p>use_of_nested_newton</p></li>
</ul>
<p>If you want to make a solely 1D-sewerage model you have to define the inflow parameters. For more information, see <a class="reference internal" href="g_inflow.html#inflow"><span class="std std-ref">Inflow</span></a>.</p>
<section id="manholes">
<h2>Manholes<a class="headerlink" href="#manholes" title="Permalink to this heading"></a></h2>
<p>Manholes are the base of your sewerage model, because they define the locations where the 1D sewerage system can interact with the surface. Each manhole must have a volume and refer to a connection node.</p>
<p>To add a manhole consider the following steps:</p>
<ol class="arabic simple">
<li><p>First, load the table v2_connection_nodes (point geometry) from the spatialite database if you haven’t already.</p></li>
<li><p>Each manhole needs to be linked to a connection node, which determines its geographical location.</p></li>
<li><p>Furthermore, each manhole must have dimensions. You have several options to define these dimensions. Check out the the <span class="xref std std-ref">database-overview</span> for more details. Note that manholes do not refer to the cross section definition table (as do the structures). The drain_level determines the elevation at which the manhole can interact with the surface and water can flow in or out of the manhole. This is only used in case of connected manholes.</p></li>
<li><p>The manholes must have manhole_indicators (what kind of manhole it is) and calculation_type. The calculation_type defines whether, and how, the water can flow in or out of the manhole.</p></li>
<li><p>In case of a purely 1D sewerage model, the manhole storage area has to be defined in the global settings. This determines the size of the ‘storage’ that is used as a substitute to determine the volume at street level when the water rises above the drain_level in case of connected manholes.</p></li>
</ol>
</section>
<section id="structures-sewerage">
<span id="id1"></span><h2>Structures (sewerage)<a class="headerlink" href="#structures-sewerage" title="Permalink to this heading"></a></h2>
<p>Sewerage structures in 3Di are always a connection between two connection nodes, without their own geometry. 3Di supports four types of structures in sewerage systems:</p>
<ol class="arabic simple">
<li><p>Pipe</p></li>
<li><p>Weir</p></li>
<li><p>Orifice</p></li>
<li><p>Pumpstation</p></li>
</ol>
<p>Check out the <span class="xref std std-ref">database-overview</span> for how use the structure attributes. Below, some specific details are listed.</p>
<ul class="simple">
<li><p>The shape of the pipe, weir and orifice is stored in the cross section definition table. So make sure you have some available before you start adding these structures.</p></li>
<li><p>To add a structure you have to define the correct start and end connection node id in the sqlite tables. You must work in the v2_structure table, editing in views is not supported.</p></li>
<li><p>The pumpstation pumps from the start node to the end node. You can choose how it is controlled using the <em>type</em> attribute. It is possible to leave the end node blank (<em>NULL</em>). In that case the pumpstation pumps water ‘out of the model’ and functions as a boundary condition. This could, for example, simulate the final pumpstation that pumps the water to the sewage treatment plant.</p></li>
</ul>
</section>
<section id="impervious-surfaces">
<h2>Impervious surfaces<a class="headerlink" href="#impervious-surfaces" title="Permalink to this heading"></a></h2>
<p>It is also possible to use a solely 1D-sewerage model without any 2D component. If that is the case make sure you activate “use_0d_inflow” in the global settings.
In this case you force the ‘0D-surfaces’ into the sewerage system. This is done by linking the ‘0D-surfaces’ (v2_impervious_surface) to a connection node (using v2_impervious_surface_map), check the <span class="xref std std-ref">database-overview</span> for more details.</p>
<p>To calculate the dry weather flow, i.e. (household) wastewater, you have to define the ‘nr_of_inhabitants’ and ‘dry_weather_flow’ in the v2_impervious_surface table.</p>
</section>
<section id="d-boundary-conditions">
<h2>1D boundary conditions<a class="headerlink" href="#d-boundary-conditions" title="Permalink to this heading"></a></h2>
<p>Boundary conditions for the 1D system are placed on connection nodes. They can only be placed on connection nodes that are connected to a single structure. So not on structures or embedded or connected channels. Check the different types of boundary conditions available in the <span class="xref std std-ref">database-overview</span>.</p>
<p>The timeseries field in the spatialite database can only be filled by copy-pasting your timeseries into the spatialite as QGIS does not allow you to enter a newline. You may use this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">,</span><span class="mf">0.000000</span>
<span class="mi">15</span><span class="p">,</span><span class="mf">1.000000</span>
<span class="mi">30</span><span class="p">,</span><span class="mf">2.000000</span>
<span class="mi">45</span><span class="p">,</span><span class="mf">3.000000</span>
<span class="mi">60</span><span class="p">,</span><span class="mf">2.000000</span>
<span class="mi">9999</span><span class="p">,</span><span class="mf">2.000000</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="d_water_system.html" class="btn btn-neutral float-left" title="Water system" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="d_urban_areas.html" class="btn btn-neutral float-right" title="Hybrid Models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Nelen &amp; Schuurmans.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>