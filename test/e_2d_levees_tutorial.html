<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial 4 Building a 2D flow model with levees, channels and breaches &mdash; 3Di  (dev doc 2023-02-27) documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/matomo.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial 5: Building a 1D model" href="e_1d_tutorial.html" />
    <link rel="prev" title="Tutorial 3: 2D flow model over sloped terrain with multiple rasters" href="e_2d_slope_tutorial.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            3Di
          </a>
              <div class="version">
                 (dev doc 2023-02-27)
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="a_background.html">Background of 3Di</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_ecosystem.html">3Di Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_modelling_concepts.html">Basic Modelling Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_releasenotes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_contact.html">Contact</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">3Di Connectors</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="b_fews_3di_integrations.html">FEWS-3Di integration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modelling guidelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="d_modeling_guidelines.html">Modelling guidelines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guide to the 3Di Modeller Interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="i_what_is_mi.html">What is the Modeller Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="i_overview_user_interface.html">Overview of the user Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="i_modelling_with_mi.html">Modelling with the Modeller Interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guide to the 3Di Live Site</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="c_what_is_the_live_site.html">What is the live site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_what_is_the_live_site.html#using-the-3di-live-site">Using the 3Di Live Site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_livesite_overview.html">Overview of the live site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_livesite_overview.html#login-to-the-live-site">Login to the Live Site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_livesite_overview.html#overview-session-screen-and-tooling">Overview session screen and tooling</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_livesite_overview.html#notables">Notables</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_modelling_with_live_site.html">Modelling with the live site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_modelling_with_live_site.html#start-or-follow-a-session">Start or follow a session</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_modelling_with_live_site.html#editing-a-model-schematisation-with-the-live-site">Editing a model schematisation with the live site</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_modelling_with_live_site.html#simulation-interventions">Simulation interventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_modelling_with_live_site.html#analyzing-results-while-scenario-is-running">Analyzing results while scenario is running</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_modelling_with_live_site.html#quitting-the-simulation">Quitting the simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_modelling_with_live_site.html#store-results">Store results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="e_klondike_workflow.html">Tutorial 1: Workflow of creating a 3Di Schematisation and a 3Di Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_2d_tutorial.html">Tutorial 2: Building a Basic 2D Flow Schematisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="e_2d_slope_tutorial.html">Tutorial 3: 2D flow model over sloped terrain with multiple rasters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial 4 Building a 2D flow model with levees, channels and breaches</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#model-initialisation">Model initialisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#model-preparation">Model preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-the-model-in-the-3di-modeller-interface">Loading the model in the 3Di Modeller Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#model-building">Model building</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#levees">Levees</a></li>
<li class="toctree-l3"><a class="reference internal" href="#channel">Channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#breach-location">Breach location</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#model-validation">Model validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#verify-the-model-rasters-using-the-raster-checker">Verify the model rasters using the raster checker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verify-the-model-schematisation-using-the-schematisation-checker">Verify the model schematisation using the schematisation checker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#model-activation">Model activation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upload-your-model">Upload your model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-your-model">Run your model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="e_1d_tutorial.html">Tutorial 5: Building a 1D model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Problem solving and support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="f_3di_instruments_and_downloads.html">Installation manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="f_problem_solving.html">FAQ and Problem Solving</a></li>
<li class="toctree-l1"><a class="reference internal" href="f_servicedesk.html">Servicedesk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="g_massconservation.html">Conservation of mass</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_sources_sinks.html">Source and Sink terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_levees_obstacles_breaches.html">Obstacles, Levees and Breaches</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_wind.html">Wind effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="g_interception.html">Interception</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Model concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="h_basic_modelling_concepts_threedi.html">Basic Modelling Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_grid.html">The grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_numerics.html">Numerics</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_control.html">Control Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_calculation_grid_data.html">Tabulated data storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_results.html">Results 3Di</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_aggregate_results.html">Aggregated output</a></li>
<li class="toctree-l1"><a class="reference internal" href="h_state_files.html">State files</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">3Di</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorial 4 Building a 2D flow model with levees, channels and breaches</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/e_2d_levees_tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial-4-building-a-2d-flow-model-with-levees-channels-and-breaches">
<h1>Tutorial 4 Building a 2D flow model with levees, channels and breaches<a class="headerlink" href="#tutorial-4-building-a-2d-flow-model-with-levees-channels-and-breaches" title="Permalink to this heading"></a></h1>
<p>In this tutorial, you are going to build a basic 2D flooding model for an area with levees, with a breach location. We will start with a model for which the basic parameters are already filled in, and expand the model step by step. We will finish this tutorial with a working model that you can play around with on the Live Site. Our area of interest is the municipality of Nissewaard on the island of Voorne-Putten in the Netherlands. The municipality of Nissewaard consists of urban area and farmland. Whilst this tutorial represents a real-world area, it is important to keep in mind that some processes will be simplified for the purpose of this tutorial.</p>
<p>In this tutorial, you will learn the following skills:</p>
<ul class="simple">
<li><p>Add levees to a 2D model.</p></li>
<li><p>Add channels to a 2D model.</p></li>
<li><p>Create a breach event in a 2D model.</p></li>
<li><p>Run the model with the breach event in the 3di Live Site.</p></li>
</ul>
<p>Before you start, please make sure to:</p>
<ul class="simple">
<li><p>Install the 3Di Modeller Interface. Please see <a class="reference internal" href="f_3di_instruments_and_downloads.html#di-instruments-and-downloads"><span class="std std-ref">Installation manual</span></a> for instructions.</p></li>
<li><p>Install the 3Di toolbox in the Modeller Interface. Please see <a class="reference internal" href="f_3di_instruments_and_downloads.html#plugin-installation"><span class="std std-ref">Plugin Installation</span></a> for instructions.</p></li>
<li><p>Gain access to the 3Di web portal. Please see the <a class="reference internal" href="c_what_is_the_live_site.html#guide-to-portal"><span class="std std-ref">What is the live site</span></a> for instructions.</p></li>
<li><p>Download the dataset for this tutorial <a class="reference external" href="https://nens.lizard.net/media/3di-tutorials/3di-tutorial-04.zip">here</a>.</p></li>
</ul>
<section id="model-initialisation">
<h2>Model initialisation<a class="headerlink" href="#model-initialisation" title="Permalink to this heading"></a></h2>
<section id="model-preparation">
<h3>Model preparation<a class="headerlink" href="#model-preparation" title="Permalink to this heading"></a></h3>
<p>Unpack the starter package and save the contents into a folder. The dataset that you downloaded for this tutorial contains an partially configured .sqlite database and a digital elevation model (DEM) for a part of the Nissewaard municipality. This DEM is called dem_Nissewaard.tif and is located in the folder named “rasters”. The structured .sqlite database contains all elements that can be included in a 3Di model. The basic settings are already filled in. For a step-by-step instruction for filling in these parameters, see <a class="reference internal" href="e_2d_tutorial.html#tutorial2-2dflatmodel"><span class="std std-ref">Tutorial 2: Building a Basic 2D Flow Schematisation</span></a>.</p>
<figure class="align-default">
<img alt="The base files" src="_images/t_map_nissewaard.png" />
</figure>
</section>
<section id="loading-the-model-in-the-3di-modeller-interface">
<h3>Loading the model in the 3Di Modeller Interface<a class="headerlink" href="#loading-the-model-in-the-3di-modeller-interface" title="Permalink to this heading"></a></h3>
<p>Our model must be imported in the 3Di Modeller Interface to view and modify its contents.
The model can be loaded via the 3Di toolbar (part of the 3Di toolbox plug in) by following these steps:</p>
<ol class="upperalpha simple">
<li><p>Open the Modeller Interface.</p></li>
<li><p>Create a new project.</p></li>
<li><p>Select the <strong>select 3Di results</strong> button on the 3Di Toolbar (white database icon). [1]</p></li>
<li><p>Select the <strong>load</strong> button in the window that pops up, and select the Nissewaard.sqlite database in your model folder. [2]</p></li>
<li><p>You should now see the 3Di model as part of your Modeller Interface layers. [3]</p></li>
</ol>
<figure class="align-default">
<img alt="Load model" src="_images/t_04_load_model.png" />
</figure>
<p>Now load the rasters into Modeller Interface to view your data.</p>
<ol class="upperalpha simple">
<li><p>Set the project coordinate system to EPSG:28992 (Amersfoort/RD New) in the bottom right of your window.</p></li>
<li><p>Add the add the DEM via <strong>Layer</strong> &gt; <strong>Add layer</strong> &gt; <strong>Add raster layer</strong>. Now select dem_Nissewaard.tif from the “raster” folder.</p></li>
</ol>
</section>
</section>
<section id="model-building">
<h2>Model building<a class="headerlink" href="#model-building" title="Permalink to this heading"></a></h2>
<section id="levees">
<h3>Levees<a class="headerlink" href="#levees" title="Permalink to this heading"></a></h3>
<p>In the model area for this tutorial, different levees are present. This can also be observed from the DEM for this area. For more information on levees, see: <a class="reference internal" href="g_levees_obstacles_breaches.html#obstacles"><span class="std std-ref">Obstacles, Levees and Breaches</span></a>.</p>
<p>When you are building a model of a certain area and you want to include the levees, you will need data on the location, height, material and maximum breach depth of the levees in that area. In this tutorial, we are going to draw a levee around the area and assume a uniform height for this levee of 3 meters above NAP. Furthermore, we will assume that the levee is made of clay and has a maximum breach depth of 3 meters.</p>
<p>Levees can be implemented in the v2_levee table. Follow these steps:</p>
<ol class="upperalpha simple">
<li><p>Make sure the DEM of the model area is opened in QGIS and places below the 3Di Model in the Modeller Interface layers, this way you can see the levee that you draw.</p></li>
<li><p>Right click on the v2_levee table and select <strong>Open attribute table</strong>. [1]</p></li>
<li><p>Select <strong>Toggle editing mode</strong>. [2]</p></li>
<li><p>In the main screen, click on the <strong>Add line feature</strong> button. [3]</p></li>
<li><p><strong>Draw</strong> your levee in the main screen. You can follow the white lines at the boundaries of the DEM (these indicate the levees). It is important that the levees are drawn within the DEM. You cannot have a levee outside of the DEM. When you are finished with drawing the levee, <strong>right-click</strong> with the mouse. Then the ‘Object-attribute’ screen will pop-up.</p></li>
<li><p>Fill in the following parameters:</p>
<ul class="simple">
<li><p>id: filled in automatically</p></li>
<li><p>code: give your levee a code or name so you can later identify it</p></li>
<li><p>crest_level: 3 (we assume a uniform crest level of 3 meters)</p></li>
<li><p>material: 2: clay</p></li>
<li><p>max_breach_depth: 3</p></li>
</ul>
</li>
<li><p>Click <strong>OK</strong> and untoggle the editing mode. [4]</p></li>
</ol>
<figure class="align-default">
<img alt="Implementing Levees" src="_images/t_04_implementing_levees.png" />
</figure>
<p>Your levee should look something like this:</p>
</section>
<section id="channel">
<h3>Channel<a class="headerlink" href="#channel" title="Permalink to this heading"></a></h3>
<p>Now that we have added the levees to the model, we are going to add a channel to the model. For more information on channels, see: <a class="reference internal" href="d_water_system.html#channels"><span class="std std-ref">Channels</span></a> and see <a class="reference internal" href="g_channelflow.html#channelflow"><span class="std std-ref">Channel Flow</span></a>.</p>
<p>Channels are drawn in between connection nodes which act as the start and endpoint of the channel. If you want to make a more elaborate model and include structures in the channel (for example a weir), you have to add extra connection nodes to link these structures to a channel (they cannot be placed on top of a channel). For now, we just want to add one channel, so we need to add two connection nodes to the v2_connection_nodes table.</p>
<p>After a channel is added to a model, a channel geometry needs to be assigned to the channel. This is done in two steps. First, we have to define a cross section profile in the v2_cross_section_definition table, and second, we have to link this profile to the channel via the v2_cross_section_location table.</p>
<p>Lastly, we have to add boundary conditions to the channel. These boundary conditions have to be linked to the connection nodes. Boundary conditions are used to describe the behavior of the system outside the domain of interest. For more information, see: <a class="reference internal" href="d_boundary_conditions.html#boundary-conditons"><span class="std std-ref">Boundary Conditions</span></a>.</p>
<p>So to add a channel or network of channels we will alter the following tables:</p>
<ul class="simple">
<li><p>v2_connection_nodes (point geometry)</p></li>
<li><p>v2_channel (line geometry)</p></li>
<li><p>v2_cross_section_definition (no geometry)</p></li>
<li><p>v2_cross_section_location (point geometry)</p></li>
<li><p>v2_boundary_conditions (point geometry)</p></li>
</ul>
<p>First we will add the start and end connection node of the channel:</p>
<ol class="upperalpha simple">
<li><p>Select the v2_connection_nodes table. [1]</p></li>
<li><p>Select <strong>Toggle editing mode</strong>. [2]</p></li>
<li><p>Click on the <strong>Add point feature</strong> button. [3]</p></li>
<li><p>Click on a desired location on your map to add a connection. Make sure the connection nodes are located within the DEM layer. After clicking in the screen the ‘Object-attribute’ screen will pop-up.[4]</p></li>
<li><p>Fill in the following parameters:</p>
<ul class="simple">
<li><p>id: filled in automatically</p></li>
<li><p>code: give your connection node a code or name so you can later identify it</p></li>
<li><p>inital_waterlevel: 3</p></li>
<li><p>storage_area: 0.1</p></li>
</ul>
</li>
<li><p>Then click <strong>OK</strong> and untoggle the editing mode. [5]</p></li>
<li><p>Do the same for location [6]</p></li>
</ol>
<figure class="align-default">
<img alt="Adding connection nodes" src="_images/t_04_adding_connection_nodes.png" />
</figure>
<p>Next, we are going to add a channel:</p>
<ol class="upperalpha simple">
<li><p>Select the v2_channel table. [1]</p></li>
<li><p>Select <strong>Toggle editing mode</strong>. [2]</p></li>
<li><p>Click on the <strong>Add line feature</strong> button. [3]</p></li>
<li><p>Click the <strong>enable snapping</strong> button. The enable snapping button helps you to make sure you connect to a certain point in the map. [4]</p></li>
<li><p>Hover with your mouse over the upper connection point, until a purple square appears. If you click when the purple square appears, you have connected the channel to the connection point.</p></li>
<li><p><strong>Draw</strong> the channel by clicking on different locations, as done in the figure below. In order to make sure the channel is connected to the other connection point, again click when the purple square is visible. Similar to drawing the levee, it is important that the channel is drawn within the DEM. You cannot have a channel outside the DEM. When you are finished with drawing the channel, <strong>right-click</strong> with the mouse. Then the ‘Object-attribute’ screen will pop-up.</p></li>
<li><p>Fill in the following parameters:</p>
<ul class="simple">
<li><p>id: filled in automatically</p></li>
<li><p>display_name: give your channel a code or name so you can later identify it</p></li>
<li><p>code: give your channel a code or name so you can later identify it</p></li>
<li><p>calculation_type: 102:connected</p></li>
<li><p>dist_calc_points: 50</p></li>
</ul>
</li>
<li><p>Then click <strong>OK</strong> and untoggle the editing mode and click <strong>Save</strong>. [5]</p></li>
</ol>
<p>For more information on calculation types, see: <a class="reference internal" href="g_1dtypes.html#calculation-types"><span class="std std-ref">Types of 1D elements (calculation types)</span></a>.</p>
<figure class="align-default">
<img alt="Adding a channel" src="_images/t_04_adding_channel.png" />
</figure>
<p>Adding channel geometry:</p>
<ol class="upperalpha simple">
<li><p>Right click on the v2_cross_section_definition table and select <strong>Open attribute table</strong>. [1]</p></li>
<li><p>Select <strong>Toggle editing mode</strong>. [2]</p></li>
<li><p>Fill in the following parameters: [3]</p>
<ul class="simple">
<li><p>id: filled in automatically</p></li>
<li><p>code: rectangle_channel</p></li>
<li><p>shape: 1: rectangle</p></li>
<li><p>width: 10</p></li>
<li><p>height: 3</p></li>
</ul>
</li>
<li><p>Untoggle the editing mode and click  <strong>save</strong>. [4]</p></li>
</ol>
<p>For more information on cross section shapes, see: <a class="reference internal" href="g_1dtypes.html#cross-section-of-1d-element"><span class="std std-ref">Cross-sections of 1D elements</span></a>.</p>
<figure class="align-default">
<img alt="Adding a cross section definition" src="_images/t_04_adding_cross_section_definition.png" />
</figure>
<ol class="upperalpha simple">
<li><p>Select the v2_cross_section_location table. [1]</p></li>
<li><p>Select <strong>Toggle editing mode</strong>. [2]</p></li>
<li><p>Click on the <strong>Add point feature</strong> button.</p></li>
<li><p>Click the <strong>enable snapping</strong> button. The enable snapping button helps you to make sure you connect to a certain point in the map. [3]</p></li>
<li><p>Hover with your mouse over the channel that you have drawn. Click when a purple square becomes visible. Then the ‘Object-attribute’ screen will pop-up. [4]</p></li>
<li><p>Fill in the following parameters:</p>
<ul class="simple">
<li><p>id: filled in automatically</p></li>
<li><p>code: give your cross section location a code or name so you can later identify it</p></li>
<li><p>reference_level: 0</p></li>
<li><p>bank_level: 4</p></li>
<li><p>friction_type: 2: Manning</p></li>
<li><p>friction_value: 0.0022</p></li>
<li><p>definition_id: 1 (this id number is related to the previously added cross section definition)</p></li>
<li><p>channel_id: 1 (this id number is related to the previously added channel)</p></li>
</ul>
</li>
<li><p>Untoggle the editing mode and click  <strong>save</strong>. [5]</p></li>
</ol>
<figure class="align-default">
<img alt="Adding a cross section location" src="_images/t_04_adding_cross_section_location.png" />
</figure>
<p>Lastly, we add boundary conditions:</p>
<ol class="upperalpha simple">
<li><p>Right click on the v2_1d_boundary_conditions table and select <strong>Open attribute table</strong>. [1]</p></li>
<li><p>Select <strong>Toggle editing mode</strong>. [2]</p></li>
<li><p>Fill in the following parameters:</p>
<ul class="simple">
<li><p>id: filled in automatically</p></li>
<li><p>connection_node_id: 1 (this id number is related to the previously added connection nodes)</p></li>
<li><p>boundary_type: 1: waterlevel</p></li>
<li><dl class="simple">
<dt>timeseries:</dt><dd><ul>
<li><p>0,3.0</p></li>
<li><p>15,3.5</p></li>
<li><p>9999,3.5</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
<li><p>Click on the <strong>add feature</strong> button and enter the same parameters. Only this time, enter 2 in the connection_node_id box.</p></li>
<li><p>Untoggle the editing mode and click  <strong>save</strong>. [4]</p></li>
</ol>
<figure class="align-default">
<img alt="Adding a cross section location" src="_images/t_04_adding_boundary_condition.png" />
</figure>
</section>
<section id="breach-location">
<h3>Breach location<a class="headerlink" href="#breach-location" title="Permalink to this heading"></a></h3>
<p>Now that we have added a connected channel to our model, we are going to add a breach location. For more theoretical information on breaches, see: <a class="reference internal" href="g_levees_obstacles_breaches.html#breaches"><span class="std std-ref">Breaches</span></a>. For a more detailed guide on how to add a levee breach, see: <a class="reference internal" href="i_editing_schematisations.html#addleveebreaches"><span class="std std-ref">Add levee breaches</span></a>.</p>
<p>Follow these steps to add a breach:</p>
<ol class="upperalpha simple">
<li><p>Click on the <strong>Commands for working with 3di models</strong> button. [1]</p></li>
<li><p>Open ‘Step 3 - Modify schematisation’. [2]</p></li>
<li><p>Choose <strong>predict calc points</strong>. [3]</p></li>
<li><p>Choose Nissewaard.sqlite and click <strong>OK</strong>. [4]</p></li>
</ol>
<p>In your schematisation, two tables have now been added: v2_connected_pnt and v2_calculation_point. These tables are also visualised in your screen: a lot of points are added along the channel.</p>
<figure class="align-default">
<img alt="Adding a cross section location" src="_images/t_04_breach_tussenstap.png" />
</figure>
<p>In order to add a breach, we have to move one of the connected points in the model from its location in the channel to the other side of the levee.</p>
<ol class="upperalpha simple" start="5">
<li><p>Select the v2_connected_pnt table. [1]</p></li>
<li><p>Select <strong>Toggle editing mode</strong>. [2]</p></li>
<li><p>Click on the <strong>vertex tool</strong> button.  [3]</p></li>
<li><p>Click on one of the connected points in the channel and drag the point to the other side of the levee. Then the ‘Object-attribute’ screen will pop-up.</p></li>
<li><p>Fill in the following parameters:</p>
<ul class="simple">
<li><p>exchange_level: 3</p></li>
<li><p>id: filled in automatically</p></li>
<li><p>calculation_pnt_id: filled in automatically</p></li>
<li><p>levee_id: 1</p></li>
</ul>
</li>
<li><p>Untoggle the editing mode and click  <strong>save</strong>. [4]</p></li>
</ol>
<figure class="align-default">
<img alt="Adding a breach" src="_images/t_04_adding_breach.png" />
</figure>
<p>The displaced connected point is now the link between the 2D grid cell in which it is placed and the corresponding calculation point in the channel. In other words, this connection point now forms a link between the 1D and 2D part of the model. More information about calculation points, connected points and breaches can be found in the 3Di documentation.</p>
</section>
</section>
<section id="model-validation">
<h2>Model validation<a class="headerlink" href="#model-validation" title="Permalink to this heading"></a></h2>
<p>A short description of the model validation is given here.
A comprehensive guide with visual support is provided in Tutorial 1 (<a class="reference internal" href="e_workflow_tutorial.html#post-processing"><span class="std std-ref">Post-processing</span></a>) and for a general guide see <a class="reference internal" href="i_checking_schematisations.html#checking-model"><span class="std std-ref">Checking the model schematisation</span></a>.</p>
<section id="verify-the-model-rasters-using-the-raster-checker">
<h3>Verify the model rasters using the raster checker<a class="headerlink" href="#verify-the-model-rasters-using-the-raster-checker" title="Permalink to this heading"></a></h3>
<p>Before sending our model to the web portal, it is important to validate that our model contains no errors. The raster checker is part of the 3Di toolbox and performs 18 checks to verify the quality of the DEM. The raster checker checks all the rasters that are included in the model. In our case, this is only the DEM for the area of Nissewaard, but in more sophisticated models you can also include other rasters, like friction and infiltration.</p>
<p>In order to use the raster checker, follow these steps:</p>
<ol class="upperalpha simple">
<li><p>Select the <strong>commands for working with 3Di models</strong> button. On the right of your screen, a tab “3Di” will open. [1]</p></li>
<li><p>Expand the “Step 1 – Check data” line and click on the <strong>raster checker</strong>. [2]</p></li>
<li><p>In the pop-up screen, select ‘spatialite: Nissewaard’ and click <strong>OK</strong>. [3]</p></li>
</ol>
<p>The following screen will appear:</p>
<figure class="align-default">
<img alt="Raster checker" src="_images/t_04_raster_checker.png" />
</figure>
</section>
<section id="verify-the-model-schematisation-using-the-schematisation-checker">
<h3>Verify the model schematisation using the schematisation checker<a class="headerlink" href="#verify-the-model-schematisation-using-the-schematisation-checker" title="Permalink to this heading"></a></h3>
<p>The second validation that we have to perform before sending the model to the web portal is that of the model schematisation.
For this, we use the schematisation checker.
It checks the model tables for many possible errors that cause the model to crash when you want to compile the model.
In order to check your model schematisation, follow steps a and b from the previous step, but now select <strong>schematisation checker</strong>.
Again, select ‘spatialite: Nissewaard’ and select the destination for the output file.
Select <strong>Run</strong>.</p>
<p>The output file is an excel file in which all the warnings and errors that were found are listed.
You may get the error “Value in v2_aggregation_settings.aggregation_in_space should be of the type integer”.
This is a known error in the schematisation checker, which will be removed in a future update.
If you get this error, you can ignore it.</p>
<p>If you do not get any further warnings or errors, your model is successfully validated and is ready to upload to the web portal.</p>
</section>
</section>
<section id="model-activation">
<h2>Model activation<a class="headerlink" href="#model-activation" title="Permalink to this heading"></a></h2>
<p>A short description of the model activation is given here. A comprehensive guidance with visual support is provided in Tutorial 2 (<a class="reference internal" href="e_2d_tutorial.html#tutorial2-2dflatmodel"><span class="std std-ref">Tutorial 2: Building a Basic 2D Flow Schematisation</span></a>).</p>
<section id="upload-your-model">
<h3>Upload your model<a class="headerlink" href="#upload-your-model" title="Permalink to this heading"></a></h3>
<p>See <a class="reference internal" href="e_klondike_workflow.html#uploading-schematisation"><span class="std std-ref">Uploading the Schematisation</span></a> for how to upload your model.</p>
<p>The model is now also available on the <a class="reference external" href="https://www.3di.live/">3Di Livesite</a> and the <a class="reference external" href="https://management.3di.live">management screens</a>.</p>
</section>
<section id="run-your-model">
<h3>Run your model<a class="headerlink" href="#run-your-model" title="Permalink to this heading"></a></h3>
<p>You have now build a 2D flow model for mountainous terrain from scratch!
You can now run your model via the 3Di Live Site (<a class="reference internal" href="c_what_is_the_live_site.html#guide-to-portal"><span class="std std-ref">What is the live site</span></a>) or via the 3Di Modeller Interface (<a class="reference internal" href="i_running_a_simulation.html#simulate-api-qgis"><span class="std std-ref">Running a simulation</span></a>).
It will be available under the name you gave it.</p>
<p>It is important to note that you have to open your breach in the 3Di Live Site. In the 3Di Live Site, breaches are depicted as a brown dot [1].  You can open a breach by clicking on the breach and clicking on the settings button [2]. Here you can open the breach. Also, you can set the time it takes for the breach location to be fully breached (Time [H]) and the initial breach width.</p>
<figure class="align-default">
<img alt="Breach on live site" src="_images/t_04_breach_live_site.png" />
</figure>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="e_2d_slope_tutorial.html" class="btn btn-neutral float-left" title="Tutorial 3: 2D flow model over sloped terrain with multiple rasters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="e_1d_tutorial.html" class="btn btn-neutral float-right" title="Tutorial 5: Building a 1D model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Nelen &amp; Schuurmans.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>